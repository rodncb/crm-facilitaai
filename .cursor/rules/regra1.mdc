---
description: 
globs: 
alwaysApply: true
---
/**
 * Configura o Cursor AI Agent para priorizar:
 * - CÃ³digo resiliente (anti-bugs)
 * - Boas prÃ¡ticas (SOLID, clean code)
 * - SugestÃµes de otimizaÃ§Ã£o
 * - PadrÃµes do seu projeto
 */
const cursorAgentRules = {
  // 1. REGRAS DE QUALIDADE
  quality: {
    strictTypeChecking: true, // ForÃ§a tipagem em TS/JSDoc
    maxFunctionLines: 20, // Alerta se funÃ§Ã£o > 20 linhas
    complexityThreshold: 5, // CiclomÃ¡tica mÃ¡xima
    avoidPatterns: [ // PadrÃµes proibidos
      "console.log", 
      "anyType", 
      "var "
    ],
    replacementSuggestions: { // Auto-correÃ§Ãµes
      "console.log": "logger.debug", 
      "anyType": "unknown" 
    }
  },

  // 2. CONTEXTO DO PROJETO (Atualize com seus dados!)
  projectContext: {
    framework: "Next.js", // React, Vue, etc.
    mainDependencies: ["axios", "zod", "prisma"],
    styleGuide: "https://meucrm.com/style-guide",
    filesToReference: [ // Arquivos que o Agent DEVE considerar
      "src/lib/utils.ts", 
      "src/types/index.d.ts"
    ]
  },

  // 3. APRENDIZADO CONTÃNUO
  learning: {
    analyzePastBugs: true, // Sugere fixes baseados em bugs anteriores
    trackTechDebt: true // Marca "TODO" como tech debt
  }
};

// 4. MONITORAMENTO EM TEMPO REAL (Via Cursor API)
function enableRealTimeFeedback() {
  // Hooks para eventos do editor (ex.: salvar, digitar)
  cursor.on('fileSave', (file) => {
    const suggestions = analyzeCode(file.content, cursorAgentRules);
    cursor.showSuggestions(suggestions); // Exibe no editor
  });
}

// 5. ANALISADOR DE CÃ“DIGO (SimulaÃ§Ã£o)
function analyzeCode(code, rules) {
  const issues = [];
  
  // a. Verifica padrÃµes proibidos
  rules.quality.avoidPatterns.forEach(pattern => {
    if (code.includes(pattern)) {
      issues.push({
        line: code.split('\n').findIndex(line => line.includes(pattern)) + 1,
        message: `Evite "${pattern}". Use: ${rules.quality.replacementSuggestions[pattern] || 'alternativa segura'}`,
        severity: "warning"
      });
    }
  });

  // b. Verifica complexidade (exemplo simplificado)
  const functionLines = code.match(/function\s+\w+\(.*\)\s*\{([\s\S]*?)\}/g);
  if (functionLines && functionLines[0].split('\n').length > rules.quality.maxFunctionLines) {
    issues.push({
      line: code.split('\n').findIndex(line => line.includes("function")),
      message: `FunÃ§Ã£o muito longa (> ${rules.quality.maxFunctionLines} linhas). Quebre em funÃ§Ãµes menores.`,
      severity: "error"
    });
  }

  return issues;
}

// Ativa o agente
enableRealTimeFeedback();
console.log("ğŸ” Cursor AI Agent otimizado para qualidade!");